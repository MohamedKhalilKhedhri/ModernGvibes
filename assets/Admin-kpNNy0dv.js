import{r as o,F as O,t as e,M as q,x as I,y as A,J as B,N as G,O as J,P as Q,Q as _,T as z}from"./index-DantKR7a.js";const b="/ModernGvibes/assets/camHolder-BD8tGoc-.jpg";function W(){const[l,m]=o.useState({video:null,VideoPlaceHolder:null}),[r,g]=o.useState(null),[a,y]=o.useState({image:0,video:0,VideoPlaceHolder:0}),[N,w]=o.useState(""),[P,f]=o.useState(!1),[i,V]=o.useState("vid"),[c,H]=o.useState(""),[h,n]=o.useState(""),[u,v]=o.useState(!1),x=s=>s instanceof File,S=(s,t=null)=>new Promise(($,U)=>{f(!0);const k=J(Q,s.name),C=_(k,s);C.on("state_changed",d=>{const j=d.bytesTransferred/d.totalBytes*100;y(E=>({...E,[t]:j}))},d=>{console.error(d),f(!1),U(d)},()=>{z(C.snapshot.ref).then(d=>{i==="vid"?m(j=>({...j,[t]:d})):i==="img"&&g(d),f(!1),$()})})}),L=async()=>{r?await S(r,"image"):alert("Please provide an image.")},T=async()=>{if(l.video&&l.VideoPlaceHolder)for(const[s,t]of Object.entries(l))x(t)&&await S(t,s);else alert("Please provide both video and video placeholder.")},[F,p]=o.useState(!1),D=async s=>{if(s.preventDefault(),p(!0),i==="vid"&&(!l.video||!l.VideoPlaceHolder)||i==="img"&&!r||!c){v(!0),p(!1),n("Please fill all required fields.");return}if(i==="vid"&&a.video<100&&a.VideoPlaceHolder<100||i==="img"&&a.image<100){v(!0),p(!1),n("Please upload your media or wait till it is fully uploaded.");return}try{v(!1),await q(I(A,"home"),{resources:i==="vid"?l:{image:r},Description:N,mediaType:i,contentType:c}),m({video:null,VideoPlaceHolder:null}),g(null),w(""),y({image:0,video:0,VideoPlaceHolder:0}),H(""),V("vid"),n("Data sent successfully!"),setTimeout(()=>n(""),5e3)}catch(t){console.error("Error adding document: ",t),n("Error sending data. Please try again."),setTimeout(()=>n(""),5e3)}finally{p(!1)}},M=O(B),R=async()=>{try{await G(M),window.location.href="/ModernGvibes/"}catch(s){console.error("Error signing out:",s)}};return e.jsxs("div",{className:"w-full h-screen flex items-center justify-center flex-col text-neutral-300 text-sm md:text-base",children:[e.jsxs("div",{className:"flex gap-5 shadow-lg w-full max-w-[500px] p-5 border-2 rounded-md border-slate-200 mt-24 mx-auto",children:[e.jsxs("div",{className:"flex flex-col w-28 items-center gap-3",children:[i==="vid"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full flex flex-col gap-2 items-center",children:[e.jsxs("label",{htmlFor:"video",className:`${u&&(!l.video||a.video<100)?"text-red-600":""}`,children:["Video:",l.video?e.jsx("video",{src:x(l.video)?URL.createObjectURL(l.video):l.video,className:"w-full aspect-square",alt:"Preview"}):e.jsx("img",{src:b,alt:"Preview",className:"w-full aspect-square"})]}),e.jsx("input",{type:"file",id:"video",onChange:s=>{const t=s.target.files[0];m({...l,video:t})},style:{display:"none"}}),a.video>0&&e.jsx("div",{className:"progress-bar-container",children:e.jsxs("div",{className:"progress-bar",style:{width:`${a.video}%`},children:[Math.floor(a.video),"%"]})})]}),e.jsxs("div",{className:"w-full flex flex-col gap-2 items-center",children:[e.jsxs("label",{htmlFor:"VideoPlaceHolder",className:`${u&&(!l.VideoPlaceHolder||a.VideoPlaceHolder<100)?"text-red-600":""}`,children:["PH:",e.jsx("img",{src:l.VideoPlaceHolder?x(l.VideoPlaceHolder)?URL.createObjectURL(l.VideoPlaceHolder):l.VideoPlaceHolder:b,alt:"video placeholder preview",className:"w-full aspect-square"})]}),e.jsx("input",{type:"file",id:"VideoPlaceHolder",accept:"image/jpeg, image/png, image/webp",onChange:s=>{const t=s.target.files[0];m({...l,VideoPlaceHolder:t})},style:{display:"none"}}),a.VideoPlaceHolder>0&&e.jsx("div",{className:"progress-bar-container",children:e.jsxs("div",{className:"progress-bar",style:{width:`${a.VideoPlaceHolder}%`},children:[Math.floor(a.VideoPlaceHolder),"%"]})})]})]}):e.jsxs("div",{className:"w-full flex flex-col gap-2 items-center",children:[e.jsxs("label",{htmlFor:"image",className:`${u&&!r?"text-red-600":""}`,children:["Image:",e.jsx("img",{src:r?x(r)?URL.createObjectURL(r):r:b,alt:"image preview",className:"w-24 h-24 object-cover"})]}),e.jsx("input",{type:"file",id:"image",accept:"image/jpeg, image/png, image/webp",onChange:s=>{const t=s.target.files[0];g(t)},style:{display:"none"}}),a.image>0&&e.jsx("div",{className:"progress-bar-container",children:e.jsxs("div",{className:"progress-bar",style:{width:`${a.image}%`},children:[Math.floor(a.image),"%"]})})]}),e.jsx("button",{className:"py-2 px-4 bg-black text-white rounded-md active:scale-95 transition-all",disabled:P,onClick:i==="vid"?T:L,children:P?"Loading...":"Upload"})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-3 flex-1",children:[e.jsx("label",{children:"Media type"}),e.jsxs("select",{value:i,onChange:s=>V(s.target.value),className:"text-neutral-900 border border-slate-300 p-3",children:[e.jsx("option",{value:"vid",children:"Video"}),e.jsx("option",{value:"img",children:"Image"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 flex-1",children:[e.jsx("label",{className:`${u&&!c?"text-red-600":""}`,children:"Content type"}),e.jsxs("div",{children:[e.jsxs("select",{value:c,onChange:s=>H(s.target.value),className:`text-neutral-900 w-full border ${u&&!c?"border-red-600 text-red-600":"border-slate-300 "} p-3`,children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"couples",children:"Couples"}),e.jsx("option",{value:"products",children:"Products"}),e.jsx("option",{value:"fashion",children:"Fashion"}),e.jsx("option",{value:"commercials",children:"Commercials"})]}),u&&!c&&e.jsx("p",{className:"text-red-600",children:"This field is required!"})]})]})]}),e.jsxs("div",{className:"mt-3 flex flex-col gap-3",children:[e.jsx("label",{className:"",children:"Description"}),e.jsx("textarea",{value:N,onChange:s=>w(s.target.value),className:"text-neutral-900 border border-slate-300 rounded-md text-sm shadow-sm p-3 focus:outline-none focus:border-sky-500 focus:ring-1 focus:ring-sky-500"})]}),e.jsx("button",{type:"submit",className:"mt-3 bg-blue-500 rounded-md text-white py-2 px-5 hover:bg-blue-600 active:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300 cursor-pointer",disabled:F,children:F?"Loading...":"Send"}),h&&e.jsx("p",{className:`mt-2 ${h.includes("success")?"text-green-500":"text-red-600"}`,children:h})]})})]}),e.jsxs("p",{className:"text-center text-stone-500",children:["Please fill the Media Type first ",e.jsx("span",{className:"inline-block text-sm",children:"(default: video)"})]}),e.jsx("button",{type:"button",className:"py-3 px-10 bg-white text-main",onClick:R,children:"LogOut"})]})}export{W as default};
